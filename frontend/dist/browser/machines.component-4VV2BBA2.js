import{a as X,b as Y,c as Z}from"./chunk-6F2WEIF5.js";import{b as J,c as K,f as W}from"./chunk-5THMYIPO.js";import{d as A,g as L,h as R}from"./chunk-JJDLFBXB.js";import{A as j,B as U,E as z,F as H,a as k,c as V,d as q,e as Q,f as I,h as N,j as B,k as $,l as G,m as P}from"./chunk-DYIXH4MK.js";import{Aa as g,Mb as S,Na as h,Ob as O,Pa as t,Ta as o,Ua as m,Va as l,Ya as _,Za as f,_a as F,cb as y,db as x,eb as v,ga as C,gb as b,kb as w,lb as T,mb as D,nb as M,oa as c,ob as E,pa as u,za as n}from"./chunk-A3EPPO4K.js";var ie=["machineFormOverlay"],ne=["machineFormComponent"],oe=["entryFormComponent"],ae=()=>({placeholder:"Name"}),re=i=>["details/",i];function me(i,a){if(i&1){let s=_();o(0,"button",33),f("click",function(){let d=c(s).$implicit,r=F();return u(r.openEntryForm(d.data))}),l(1,"i",34),m()}}function le(i,a){if(i&1&&(o(0,"a",35),l(1,"i",36),m()),i&2){let s=a.$implicit;t("routerLink",D(1,re,s==null||s.data==null?null:s.data.id))}}function de(i,a){if(i&1&&l(0,"oee-entries-table",37),i&2){let s,e=a.$implicit;t("entries",(s=e==null||e.data==null?null:e.data.latest_entries)!==null&&s!==void 0?s:null)}}var Te=(()=>{let a=class a{constructor(e){this.store=e,this.machines$=this.store.select(W.machines),this.store.dispatch(new K),this.machineForm={machine_name:""}}openMachineForm(){this.slidingOverlay?.slideIn()}resetForm(){this.machineFormComponent?.instance.reset()}addMachine(e){e.preventDefault(),this.machineFormComponent?.instance.validate()?.isValid&&this.store.dispatch(new J(this.machineForm)).subscribe({next:()=>{this.slidingOverlay?.slideOut(),this.resetForm()},error:r=>{}})}log(e){return console.log("machine: ",e),e}openEntryForm(e){this.entryFormComponent?.open(e)}};a.\u0275fac=function(d){return new(d||a)(g(R))},a.\u0275cmp=C({type:a,selectors:[["app-machines"]],viewQuery:function(d,r){if(d&1&&(y(ie,5),y(ne,5),y(oe,5)),d&2){let p;x(p=v())&&(r.slidingOverlay=p.first),x(p=v())&&(r.machineFormComponent=p.first),x(p=v())&&(r.entryFormComponent=p.first)}},standalone:!0,features:[w],decls:39,vars:18,consts:[["machineFormOverlay",""],["machineFormComponent",""],["entryFormComponent",""],[1,"h-full","flex","flex-col"],[1,"mb-5"],[1,"flex-1"],[1,"h-full",3,"dataSource","showColumnLines","showRowLines"],["dataField","id","caption","ID","alignment","start","width","auto"],["dataField","machine_name","caption","Name"],["dataField","total_good_units","caption","Good Units"],["dataField","average_availability","caption","Average availability"],["dataField","average_performance","caption","Average performance"],["dataField","average_quality","caption","Average quality"],["dataField","average_oee","caption","Average OEE"],["type","buttons","width","auto"],["hint","Add Record","template","addEntryTemplate"],["type","button","title","Add Record","class","text-primary",3,"click",4,"dxTemplate","dxTemplateOf"],["hint","View","template","viewTemplate"],["type","button","title","Add Record","class","text-fg ms-3",3,"routerLink",4,"dxTemplate","dxTemplateOf"],["template","LatestEntriesTemplate",3,"enabled"],[3,"entries",4,"dxTemplate","dxTemplateOf"],[3,"enabled"],[3,"enabled","showIndicator"],["title","Add Machine",1,"fixed","bottom-6","right-10","w-14","h-auto","aspect-square","rounded-full","bg-primary","hover:rotate-180","hover:bg-primary-dark","transition-all",3,"click"],[1,"fa-solid","fa-plus","text-3xl"],[3,"submit"],[3,"formData"],["dataField","machine_name","caption","Name",3,"editorOptions"],["text","Name"],["type","required","message","Name is required"],["type","stringLength","message","Name must be between 3 and 30 characters",3,"min","max"],["itemType","button"],["text","Add machine",3,"useSubmitBehavior"],["type","button","title","Add Record",1,"text-primary",3,"click"],[1,"fa-solid","fa-plus"],["type","button","title","Add Record",1,"text-fg","ms-3",3,"routerLink"],[1,"fa-solid","fa-eye"],[3,"entries"]],template:function(d,r){if(d&1){let p=_();o(0,"div",3)(1,"h1",4),b(2,"Machines"),m(),o(3,"div",5)(4,"dx-data-grid",6),M(5,"async"),l(6,"dxi-column",7)(7,"dxi-column",8)(8,"dxi-column",9)(9,"dxi-column",10)(10,"dxi-column",11)(11,"dxi-column",12)(12,"dxi-column",13),o(13,"dxi-column",14)(14,"dxi-button",15),h(15,me,2,0,"button",16),m(),o(16,"dxi-button",17),h(17,le,2,3,"a",18),m()(),l(18,"dxo-master-detail",19),h(19,de,1,1,"oee-entries-table",20),l(20,"dxo-paging",21)(21,"dxo-load-panel",22),m()()(),o(22,"button",23),f("click",function(){return c(p),u(r.openMachineForm())}),l(23,"i",24),m(),o(24,"oee-sliding-overlay",null,0)(26,"h1"),b(27,"Add machine"),m(),o(28,"form",25),f("submit",function(te){return c(p),u(r.addMachine(te))}),o(29,"dx-form",26,1)(31,"dxi-item",27),l(32,"dxo-label",28)(33,"dxi-validation-rule",29)(34,"dxi-validation-rule",30),m(),o(35,"dxi-item",31),l(36,"dxo-button-options",32),m()()()(),l(37,"oee-entry-form",null,2)}d&2&&(n(4),t("dataSource",E(5,15,r.machines$))("showColumnLines",!1)("showRowLines",!1),n(11),t("dxTemplateOf","addEntryTemplate"),n(2),t("dxTemplateOf","viewTemplate"),n(),t("enabled",!0),n(),t("dxTemplateOf","LatestEntriesTemplate"),n(),t("enabled",!1),n(),t("enabled",!1)("showIndicator",!0),n(8),t("formData",r.machineForm),n(2),t("editorOptions",T(17,ae)),n(3),t("min",3)("max",30),n(2),t("useSubmitBehavior",!0))},dependencies:[O,S,U,j,N,Q,B,V,q,I,$,G,P,k,X,H,z,Z,Y,L,A]});let i=a;return i})();export{Te as MachinesComponent};
//# sourceMappingURL=machines.component-4VV2BBA2.js.map
