import{b as Z,c as ee}from"./chunk-SVFMNYS2.js";import{d as X,f as Y}from"./chunk-RSRVZNX2.js";import{a as L,h as N}from"./chunk-JJDLFBXB.js";import{b as z,g as H,i as J,j as K,n as Q,y as U,z as W}from"./chunk-DYIXH4MK.js";import{Aa as v,Lb as j,Mb as q,Na as C,Nb as O,Ob as G,Pa as l,R as F,T as w,Ta as o,Ua as m,Va as d,Wa as V,Xa as B,Ya as A,Za as I,_a as c,a as S,b as E,fb as D,ga as T,gb as p,hb as $,ib as _,kb as R,lb as f,nb as u,oa as g,ob as x,pa as y,pb as k,q as M,qb as P,u as h,za as s}from"./chunk-A3EPPO4K.js";var te=()=>[],ie=()=>({startValue:0,endValue:1});function ne(n,r){if(n&1&&(o(0,"div")(1,"h1"),p(2),m(),o(3,"h2"),p(4),m()()),n&2){let a=r.ngIf;s(2),_("Error - ",a.status,""),s(2),$(a.message)}}function re(n,r){if(n&1){let a=A();o(0,"div",4)(1,"div")(2,"h1"),p(3),m(),o(4,"p"),p(5),u(6,"percent"),m()(),o(7,"button",5),I("click",function(){g(a);let i=D(23),e=c(2);return y(e.machineDetails&&i.open(e.machineDetails))}),p(8," Add Entry + "),m()(),o(9,"dx-chart",6),u(10,"async"),o(11,"dxo-argument-axis"),d(12,"dxo-label",7),m(),o(13,"dxi-value-axis",8),d(14,"dxo-label",9),m(),d(15,"dxo-common-series-settings",10)(16,"dxi-series",11)(17,"dxi-series",12)(18,"dxi-series",13)(19,"dxi-series",14),m(),d(20,"oee-entries-table",15),u(21,"async"),o(22,"oee-entry-form",16,1),I("submit",function(){g(a);let i=c().ngIf,e=c();return y(e.getMachineById(i==null?null:i.id))}),m()}if(n&2){let a,t,i=c().ngIf,e=c();s(3),_("",i.name," - Details"),s(2),_("OEE: ",k(6,6,i.average_oee,"1.1-1"),""),s(4),l("dataSource",(a=x(10,9,e.entries$))!==null&&a!==void 0?a:f(13,te)),s(4),l("visualRange",f(14,ie))("maxValueMargin",.001),s(7),l("entries",(t=x(21,11,e.entries$))!==null&&t!==void 0?t:f(15,te))}}function ae(n,r){if(n&1&&(V(0),C(1,ne,5,2,"div",3)(2,re,24,16,"ng-template",null,0,P),B()),n&2){let a=r.ngIf,t=D(3);s(),l("ngIf",a.error)("ngIfElse",t)}}var ye=(()=>{let r=class r{constructor(t,i){this.route=t,this.store=i,this.machine$=this.store.select(Y.machineById).pipe(w({next:e=>{e?.error||(this.machineDetails=e)}})),this.entries$=this.machine$.pipe(h(e=>e?.entries),h(e=>e?.map(b=>E(S({},b),{created_at:new Date(b.created_at)})))),this.machineDetails=null,this.routeSubscription=this.routeSubscription=this.route.params.pipe(F(e=>this.getMachineById(parseInt(e.id)))).subscribe()}getMachineById(t){return t?this.store.dispatch(new X(t)):M(null)}ngOnDestroy(){this.routeSubscription.unsubscribe()}};r.\u0275fac=function(i){return new(i||r)(v(L),v(N))},r.\u0275cmp=T({type:r,selectors:[["oee-machine-details"]],standalone:!0,features:[R],decls:2,vars:3,consts:[["machineTemplate",""],["entryForm",""],[4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"flex","flex-wrap","items-center"],[1,"btn","ms-auto","bg-primary","text-fg-primary",3,"click"],[1,"my-5",3,"dataSource"],["format","shortDate"],[3,"visualRange","maxValueMargin"],["format","percent"],["type","spline","argumentField","created_at","argumentType","date"],["valueField","oee","name","oee"],["valueField","performance","name","performance"],["valueField","quality","name","quality"],["valueField","availability","name","availability"],[3,"entries"],[3,"submit"]],template:function(i,e){i&1&&(C(0,ae,4,2,"ng-container",2),u(1,"async")),i&2&&l("ngIf",x(1,1,e.machine$))},dependencies:[G,j,q,O,Z,ee,W,U,z,K,J,H,Q]});let n=r;return n})();export{ye as MachineDetailsComponent};
//# sourceMappingURL=machine-details.component-RWTCRI47.js.map
