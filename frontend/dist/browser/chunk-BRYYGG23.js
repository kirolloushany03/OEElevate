import{a as f}from"./chunk-PQNTSUUR.js";import{Da as l,Sa as h,Ta as y,Ua as u,d as c,l as o,o as d,r as m}from"./chunk-I77CHCRL.js";var p=(()=>{let e=class e{constructor(){}};e.type="[Machines] Get machines";let r=e;return r})(),M=(()=>{let e=class e{constructor(t){this.id=t}};e.type="[Machines] Get machine by id";let r=e;return r})(),g=(()=>{let e=class e{constructor(t){this.payload=t}};e.type="[Machines] Add machine";let r=e;return r})(),S=(()=>{let e=class e{constructor(t,s){this.machine=t,this.payload=s}};e.type="[Machines] Add OEE record";let r=e;return r})();var I=(()=>{let e=class e{constructor(t){this.crud=t}addMachine(t){return this.crud.create("/machines",t)}getMachines(){return this.crud.read("/machines")}getMachinesSummary(){return this.crud.read("/machines/summary")}getMachineById(t){return this.crud.read(`/machines/${t}`)}addOeeRecord(t,s){return s.date=s.date.split(".")[0],this.crud.create(`/machine/${t.id}/oeeRecords`,s)}};e.\u0275fac=function(s){return new(s||e)(m(f))},e.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var a,n=(a=class{constructor(e){this.machineService=e}static machines(e){return e.machines}static machineById(e){return e.machineById}addMachine(e,i){return this.machineService.addMachine(i.payload).pipe(o({next:t=>{e.dispatch(new p)},error:t=>console.error("Error adding machine",t)}))}getMachines(e,i){return this.machineService.getMachinesSummary().pipe(o({next:t=>{e.patchState({machines:t})},error:t=>console.error("Error getting machines",t)}))}getMachineById(e,i){return this.machineService.getMachineById(i.id).pipe(o({next:t=>{e.patchState({machineById:t})},error:t=>{t.status===l.NotFound&&e.patchState({machineById:{error:{status:t.status,message:t.message?.length?t.message:`Machine with id ${i.id} not found`}}})}}))}addOeeRecord(e,i){return this.machineService.addOeeRecord(i.machine,i.payload).pipe(o({next:t=>{e.dispatch(new p)},error:t=>console.error("Error adding OEE record",t)}))}},a.\u0275fac=function(i){return new(i||a)(m(I))},a.\u0275prov=d({token:a,factory:a.\u0275fac}),a);c([h(g)],n.prototype,"addMachine",null);c([h(p)],n.prototype,"getMachines",null);c([h(M)],n.prototype,"getMachineById",null);c([h(S)],n.prototype,"addOeeRecord",null);c([u()],n,"machines",null);c([u()],n,"machineById",null);n=c([y({name:"machines",defaults:{machines:[],machineById:null}})],n);export{p as a,M as b,g as c,S as d,n as e};
//# sourceMappingURL=chunk-BRYYGG23.js.map
